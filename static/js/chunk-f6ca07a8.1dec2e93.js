(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6ca07a8"],{"6c24":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"container",attrs:{id:"treecontainer"}},[e("div",{attrs:{id:"product_tree"}})])])}],i=(e("4160"),e("c975"),e("baa5"),e("4e82"),e("b0c0"),e("498a"),e("159b"),e("6e58")),o=e("1157"),l=e.n(o),c={name:"d3Two",data:function(){return{Modal:!1,formItem:{CompanyName:"",loading:"",Companyarr:[],ID:"8ac8acd46c46e686016c46f04f7600211"},allData:{},rootName:"我是根节点"}},mounted:function(){this.get_Apidata()},methods:{get_companylist:function(){console.log("选择数据"),console.log(this.formItem.CompanyName),this.formItem.ID=this.formItem.CompanyName;var t=document.getElementById("product_tree");t.innerHTML="",this.get_Apidata()},get_Company:function(t){clearTimeout(this.get_Company.timer),t.trim()},get_Apidata:function(){this.allData={downward:{direction:"downward",name:"origin",children:[{name:"上海冰鉴企业征信服务有限公司",amount:"100",ratio:"55%",hasHumanholding:!0,hasChildren:!0,isExpand:!1,children:[{name:"公司名字",hasHumanholding:!1,hasChildren:!0,amount:"100",ratio:"55%",children:[]},{name:"公司名字",hasHumanholding:!1,hasChildren:!0,amount:"100",ratio:"55%",children:[]}]},{name:"北京冰鉴企业征信服务有限公司",amount:"100",ratio:"55%",hasHumanholding:!0,hasChildren:!0,isExpand:!1,children:[{name:"公司名字",hasHumanholding:!1,hasChildren:!0,amount:"100",ratio:"55%",children:[]},{name:"公司名字",hasHumanholding:!1,hasChildren:!0,amount:"100",ratio:"55%",children:[]}]},{name:"成都量化金服大数据技术服务有限公司",hasHumanholding:!1,hasChildren:!0,amount:"100",ratio:"55%",children:[]},{name:"南京冰鉴信息科技有限公司",hasHumanholding:!1,hasChildren:!0,isExpand:!1,amount:"100",ratio:"55%",children:[{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]},{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]},{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]},{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]}]}]},upward:{direction:"upward",name:"origin",children:[{name:"上海唯猎创业投资中心(有限合伙)",hasHumanholding:!1,amount:"100",ratio:"55%",children:[{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]},{name:"公司或股东名字",hasHumanholding:!1,isExpand:!1,amount:"100",ratio:"55%",children:[{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]},{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]}]},{name:"公司或股东名字",hasHumanholding:!1,amount:"100",ratio:"55%",children:[]}]}]}},this.rootName="我是根节点",this.drawing()},drawing:function(){var t=this,n=0,e=!0,r=function(t){this.d3=t,this.directions=["upward","downward"]};r.prototype.drawChart=function(){this.treeData={};var e=this;e.directions.forEach((function(n){e.treeData[n]=t.allData[n]})),n=15*t.rootName.length,t.allData.upward.children.length,t.allData.downward.children.length,e.graphTree(e.getTreeConfig())},r.prototype.getTreeConfig=function(){var t={margin:{top:-180,right:400,bottom:0,left:0}};return t.chartWidth=1100-t.margin.right-t.margin.left,t.chartHeight=1300-t.margin.top-t.margin.bottom,t.centralHeight=t.chartHeight/2,t.centralWidth=t.chartWidth/2,t.linkLength=120,t.duration=500,t},r.prototype.graphTree=function(r){var a=this,i=this.d3,o=r.linkLength,l=r.duration,c=[],d=0,s=i.svg.diagonal().source((function(t){return{x:t.source.x,y:"origin"==t.source.name?e?t.source.y-20:t.source.y+20:e?t.source.y-60:t.source.y+60}})).target((function(t){return{x:t.target.x,y:t.target.y}})).projection((function(t){return console.log(t.x,t.y,"d.x, d.yd.x, d.yd.x, d.yd.x, d.y"),[t.x,t.y]})),u=i.behavior.zoom().scaleExtent([.5,2]).on("zoom",v),h=i.select("#product_tree").append("svg").attr("width",r.chartWidth+r.margin.right+r.margin.left).attr("height",r.chartHeight+r.margin.top+r.margin.bottom).attr("xmlns","http://www.w3.org/2000/svg").on("mousedown",k).call(u).on("dblclick.zoom",null),m=h.append("g").attr("class","gbox").attr("transform","translate("+r.margin.left+","+r.margin.top+")");h.append("marker").attr("id","resolvedDown").attr("markerUnits","strokeWidth").attr("markerUnits","userSpaceOnUse").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerWidth",12).attr("markerHeight",12).attr("orient","90").attr("stroke-width",2).append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#000"),h.append("marker").attr("id","resolvedUp").attr("markerUnits","strokeWidth").attr("markerUnits","userSpaceOnUse").attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",12).attr("markerHeight",12).attr("orient","90").attr("stroke-width",2).append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#000");for(var g in this.directions){var f=this.directions[g],p=a.treeData[f];p.x0=r.centralWidth,p.y0=r.centralHeight,p.children.forEach(w),x(p,p,m)}function x(a,u,h){console.log(a);var m=u["direction"];e="upward"==m;var f=m+"Node",p=m+"Link",w=e?-1:1,v=!1,k=130,_=i.layout.tree().sort(H).nodeSize([k,0]),C=_.nodes(u),E=_.links(C),b=-r.centralWidth;C.forEach((function(t){t.y=w*(t.depth*o)+r.centralHeight,t.x=t.x-b,"origin"==t.name&&(t.x=r.centralWidth,t.y+=0*w)}));var I=h.selectAll("g."+f).data(C,(function(t){return t.id||(t.id=++d)})),D=I.enter().append("g").attr("class",f).attr("transform",(function(t){return"translate("+a.x0+","+a.y0+")"})).style("cursor",(function(t){return"origin"==t.name?"":t.children||t._children?"pointer":""}));D.append("svg:rect").attr("x",(function(t){return"origin"==t.name?-n/2:-60})).attr("y",(function(t){return"origin"==t.name?-20:e?-52:12})).attr("width",(function(t){return"origin"==t.name?n:120})).attr("height",40).attr("rx",10).style("stroke",(function(t){return"origin"==t.name?"#1078AF":"#CCC"})).style("fill",(function(t){return"origin"==t.name?"#0080E3":"#FFF"})),D.append("circle").attr("r",1e-6),D.append("text").attr("class","linkname").attr("x",(function(t){return"origin"==t.name?"0":"-55"})).attr("dy",(function(t){return"origin"==t.name?".35em":e?"-40":"24"})).attr("text-anchor",(function(t){return"origin"==t.name?"middle":"start"})).attr("fill","#000").text((function(n){return"origin"==n.name?t.rootName:n.repeated?"[Recurring] "+n.name:n.name.length>10?n.name.substr(0,10):n.name})).style({"fill-opacity":1e-6,fill:function(t){if("origin"==t.name)return"#fff"},"font-size":function(t){return"origin"==t.name?14:11},cursor:"pointer"}).on("click",U),D.append("text").attr("class","linkname").attr("x","-55").attr("dy",(function(t){return"origin"==t.name?".35em":e?"-29":"35"})).attr("text-anchor",(function(){return"origin"==g.name?"middle":"start"})).text((function(t){return t.name.substr(10,t.name.length)})).style({fill:"#337ab7","font-size":function(t){return"origin"==t.name?14:11},cursor:"pointer"}),D.append("text").attr("x","-55").attr("dy",(function(t){return"origin"==t.name?".35em":e?"-16":"48"})).attr("text-anchor","start").attr("class","linkname").style("fill","#E066FF").style("font-size",10).text((function(t){var n="origin"==t.name?"":"认缴金额:"+t.amount+"万人民币";return n.length>13?n.substr(0,13)+"..":n})),D.append("text").attr("x","10").attr("dy",(function(t){return"origin"==t.name?".35em":e?"0":"10"})).attr("text-anchor","start").attr("class","linkname").style("fill","green").style("font-size",10).text((function(t){return"origin"==t.name?"":t.ratio}));var B=I.transition().duration(l).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"}));B.select("circle").attr("r",(function(t){return"origin"==t.name?0:-1==c.indexOf(t)?0:6})).attr("cy",(function(t){return"origin"==t.name?-20:e?-59:59})).style("fill",(function(t){return-1!=c.indexOf(t)?"#fff":""})).style("stroke",(function(t){return-1!=c.indexOf(t)?"#8b4513":""})).style("fill-opacity",(function(t){if(t.children)return.35})).style("stroke-width",(function(t){if(t.repeated)return 5})),D.append("svg:text").attr("class","isExpand").attr("x","0").attr("dy",(function(t){return e?-56:62})).attr("text-anchor","middle").style("fill","#000").text((function(t){return"origin"==t.name?"":-1!=c.indexOf(t)?"+":""})).on("click",W),B.select("text").style("fill-opacity",1);var L=I.exit().transition().duration(l).attr("transform",(function(t){return"translate("+a.x+","+a.y+")"})).remove();L.select("circle").attr("r",1e-6),L.select("text").style("fill-opacity",1e-6);var N=h.selectAll("path."+p).data(E,(function(t){return t.target.id}));function U(){t.Modal=!0}function W(t){e||(t._children?console.log("对外投资--ok"):console.log("对外投资--no")),v=!v,"origin"!=t.name&&(t.children?(t._children=t.children,t.children=null,i.select(this).text("+")):(t.children=t._children,t._children=null,"origin"==t.name&&t.children.forEach(y),i.select(this).text("-")),x(t,u,h))}N.enter().insert("path","g").attr("class",p).attr("stroke",(function(t){return"#8b4513"})).attr("fill","none").attr("stroke-width","1px").attr("opacity",.5).attr("d",(function(t){var n={x:a.x0,y:a.y0};return s({source:n,target:n})})).attr("marker-end",(function(t){return e?"url(#resolvedUp)":"url(#resolvedDown)"})).attr("id",(function(t,n){return"mypath"+n})),N.transition().duration(l).attr("d",s),N.exit().transition().duration(l).attr("d",(function(t){var n={x:a.x,y:a.y};return s({source:n,target:n})})).remove(),C.forEach((function(t){t.x0=t.x,t.y0=t.y}))}function y(t){t._children&&(t.children=t._children,t.children.forEach(y),t._children=null)}function w(t){t.children&&0!=t.children.length&&(t._children=t.children,t._children.forEach(w),t.children=null,c.push(t))}function v(){m.attr("transform","translate("+i.event.translate+") scale("+i.event.scale+")")}function k(){2==i.event.button&&(console.log("No right click allowed"),i.event.stopImmediatePropagation())}function H(t,n){var e=t.name.substr(t.name.lastIndexOf("(")+1,4),r=n.name.substr(n.name.lastIndexOf("(")+1,4);return i.ascending(e,r)||i.ascending(t.name,n.name)||i.ascending(t.id,n.id)}};var a=new r(i);a.drawChart()},search:function(){var t=document.getElementById("product_tree");t.innerHTML="",this.drawing()},downloadfun:function(){var t=document.getElementById("product_tree").getElementsByTagName("g")[0].getBBox(),n=document.getElementById("product_tree").getElementsByClassName("gbox")[0],e=-t.x,r=-t.y;n.style.transform="translate("+e+"px,"+r+"px)  scale(1)";var a=l()("#product_tree svg");a.width,a.height;a.attr("width",t.width),a.attr("height",t.height);var i=document.createElement("canvas"),o=i.getContext("2d"),c=document.getElementById("product_tree").innerHTML,d=new Image;d.src="data:image/svg+xml,"+unescape(encodeURIComponent(c)),d.src="data:image/svg+xml,"+c,d.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(c))),d.onload=function(){i.width=d.width,i.height=d.height+60,o.fillStyle="#fff",o.fillRect(0,0,i.width,i.height),o.drawImage(d,0,30);var t=document.createElement("a");t.download="png",t.href=i.toDataURL("image/png"),t.click()},n.style.transform="",a.attr("width",1100),a.attr("height",1300)}}},d=c,s=(e("98da"),e("2877")),u=Object(s["a"])(d,r,a,!1,null,"139cccd4",null);n["default"]=u.exports},"735a":function(t,n,e){},"98da":function(t,n,e){"use strict";var r=e("735a"),a=e.n(r);a.a}}]);
//# sourceMappingURL=chunk-f6ca07a8.1dec2e93.js.map